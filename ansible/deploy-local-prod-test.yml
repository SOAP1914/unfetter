---
####################################################################################
#  This playbook only builds the docker images locally
#
####################################################################################


- name: Build the Docker images only.  Do not 
  hosts: test
  tasks:
  - name: Iterate over group variables
    debug:
      var: item
    with_items: "{{ hostvars | to_nice_json }}"           
  - name: Start running the commands
    import_tasks: discover-tasks.yml
#  - include_role:
#      name: gateway
#      tasks_from: task-build-release
  - include_role:
       name: gateway
    vars:
      - image_name: "unfetter-discover-gateway"
      - docker_tag: "{{ docker_tag }}.demo" 
#  - include_role: 
#    - { role: gateway, published_port: "444", docker_tag: "{{ docker_tag }}.uac" }
#    - { role: gateway, published_port: "445", docker_tag: "{{ docker_tag }}.legacy.demo" }
#    - { role: gateway, published_port: "446", docker_tag: "{{ docker_tag }}.legacy.uac" }



